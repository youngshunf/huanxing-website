@import "tailwindcss";

@custom-variant dark (&:where(.dark, .dark *));

@theme {
  /* 品牌色（不随主题变化） */
  --color-star-purple: #6c5ce7;
  --color-star-purple-hover: #5a4bd5;
  --color-star-blue: #00d2ff;
  --color-star-gold: #ffd93d;

  /* Dark 模式色（默认） */
  --color-space-black: #0d1117;
  --color-space-panel: #161b22;
  --color-space-float: #1c2128;
  --color-space-input: #242a33;
  --color-text-primary: #e6edf3;
  --color-text-secondary: #8b949e;
  --color-text-tertiary: #6e7681;
  --color-border-default: #30363d;
  --color-border-hover: #484f58;
  --color-divider: #21262d;
}

@layer base {
  html {
    scroll-behavior: smooth;
  }

  body {
    font-family: 'Inter', 'PingFang SC', 'Microsoft YaHei', 'Noto Sans SC', system-ui, sans-serif;
    background-color: #0d1117;
    color: #e6edf3;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow-x: hidden;
  }

  /* Light 模式覆盖 */
  html:not(.dark) body {
    background-color: #f8f9fc;
    color: #1f2328;
  }

  ::selection {
    background-color: rgba(108, 92, 231, 0.3);
    color: #e6edf3;
  }

  html:not(.dark) ::selection {
    color: #1f2328;
  }

  /* 所有可点击元素统一 cursor: pointer */
  button,
  a,
  [role="button"],
  [tabindex]:not([tabindex="-1"]),
  input[type="submit"],
  input[type="button"],
  input[type="reset"],
  select,
  label[for],
  summary {
    cursor: pointer;
  }

  button:disabled,
  input:disabled,
  select:disabled {
    cursor: not-allowed;
  }
}

/* Light 模式语义色覆盖 */
@layer base {
  html:not(.dark) {
    --color-space-black: #f8f9fc;
    --color-space-panel: #ffffff;
    --color-space-float: #f0f2f5;
    --color-space-input: #e8ebf0;
    --color-text-primary: #1f2328;
    --color-text-secondary: #656d76;
    --color-text-tertiary: #8b949e;
    --color-border-default: #d0d7de;
    --color-border-hover: #b0b8c1;
    --color-divider: #e2e6ea;
  }
}

/* ===== Vditor 编辑器全屏宽度 ===== */
/* 核心：覆盖 Vditor 动态计算的 padding 和 max-width */
.vditor .vditor-wysiwyg .vditor-reset,
.vditor .vditor-ir .vditor-reset,
.vditor .vditor-sv .vditor-reset,
.vditor .vditor-preview .vditor-reset,
.vditor .vditor-wysiwyg > pre.vditor-reset,
.vditor .vditor-ir > pre.vditor-reset,
pre.vditor-reset[contenteditable] {
  padding-left: 24px !important;
  padding-right: 24px !important;
  max-width: 100% !important;
  width: 100% !important;
  box-sizing: border-box !important;
}

.vditor .vditor-wysiwyg,
.vditor .vditor-ir,
.vditor .vditor-sv,
.vditor .vditor-preview,
.vditor .vditor-content,
.vditor-content {
  max-width: 100% !important;
  width: 100% !important;
}

/* 工具栏全宽 */
.vditor .vditor-toolbar {
  width: 100% !important;
}

/* Vditor 暗色主题融合 */
.vditor {
  border-color: var(--color-border-default) !important;
}

.vditor--dark {
  background-color: var(--color-space-panel) !important;
}

.vditor--dark .vditor-toolbar {
  background-color: var(--color-space-float) !important;
  border-bottom-color: var(--color-border-default) !important;
}

/*
 * 修复：Vditor dark 模式文字颜色
 * Vditor 的 content-theme/dark.css 通过 CDN 异步加载，
 * 在 SPA 导航时可能加载不及时，导致 .vditor-reset 的 color
 * 回退到默认的 #24292e（深色文字在深色背景上不可见）。
 * 这里直接在本地 CSS 中强制设置，确保不依赖 CDN 加载时序。
 */
.vditor--dark .vditor-reset,
.vditor--dark .vditor-ir .vditor-reset,
.vditor--dark .vditor-wysiwyg .vditor-reset,
.vditor--dark .vditor-sv .vditor-reset,
.vditor--dark .vditor-preview .vditor-reset {
  color: #d1d5da !important;
}

.vditor--dark .vditor-reset a,
.vditor--dark .vditor-ir__link {
  color: #4285f4 !important;
}

.vditor--dark .vditor-reset blockquote {
  color: #b9b9b9 !important;
  border-left-color: #d1d5da !important;
}

.vditor--dark .vditor-reset h1,
.vditor--dark .vditor-reset h2 {
  border-bottom-color: #d1d5da !important;
}

.vditor--dark .vditor-reset hr {
  background-color: #d1d5da !important;
}

/* 预览组件 dark 模式文字颜色（同样的 CDN 加载时序问题） */
.dark .vditor-reset {
  color: #d1d5da;
}

.dark .vditor-reset a {
  color: #4285f4;
}

.dark .vditor-reset blockquote {
  color: #b9b9b9;
  border-left-color: #d1d5da;
}

.dark .vditor-reset h1,
.dark .vditor-reset h2 {
  border-bottom-color: #d1d5da;
}

.dark .vditor-reset hr {
  background-color: #d1d5da;
}
